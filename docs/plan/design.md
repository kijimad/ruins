# RUINS - ゲームシステム設計書

## 概要

このドキュメントは、RUINSのゲームシステム、メカニクス、技術仕様を記録するものです。
世界観・ストーリー設定については `lore.md` を参照してください。

---

## ゲーム概要

### 基本コンセプト

人間と悪魔の融合体を操り、厳しい自然環境と悪魔の敵を相手に生存・脱出を目指すサバイバルローグライク。
ターン制での戦略的な探索、リソース管理、モード切り替えによる判断が特徴です。

### ジャンル・特徴
- **ジャンル**: ローグライク・サバイバルRPG（ターンベース）
- **視点**: 1人称レイキャスティング（3D風2D）
- **探索**: グリッドベース・ターン制移動
- **戦闘**: 同一マップ上でのターンベース統合戦闘
- **成長**: 装備・悪魔の力による強化
- **言語**: 完全日本語対応

### 参考作品

#### Cataclysm: Dark Days Ahead (CDDA)
**参考にする要素:**
- **Action Points (AP) システム**: 敏捷性ベースのAP獲得、債務システム
- **地形コスト**: 移動コストの地形別差別化
- **装備重量影響**: 重装備による移動・攻撃コスト増加
- **サバイバル要素**: 食料、体温管理

#### The Long Dark
**参考にする要素:**
- **体温管理**: 寒冷環境での生存
- **リソース管理**: 有限のリソースでの判断
- **環境の脅威**: 自然そのものが敵

---

## 核心的な面白さ

### 3つの柱（メカニクス重視）

#### 1. 温度との戦い
- 体温管理がサバイバルの核
- 寒冷環境での生存プレッシャー
- 装備、焚き火、悪魔モードによる対策
- 複数のアプローチで同じ問題を解決できる

#### 2. 悪魔との戦い
- 敵悪魔との戦闘
- 悪魔モードによる戦闘強化
- モード切り替えのタイミング判断
- 戦闘と生存のリソーストレードオフ

#### 3. 悪魔由来のアイテムによる強化
- 敵悪魔を倒して素材を得る
- 悪魔の力をアップグレード
- ビルドの多様性
- リプレイ性の確保

---

## レベル構造

### 大域移動: ハブ型

```
           [森 20F]
         /
[ハブ] ──┼─ [村 20F]
         \
           [山 20F]
```

- ハブから各エリアに出発
- エリアクリア or 撤退でハブに戻る
- ハブで装備整理、強化、回復
- エリアは順番に攻略（前のエリアをクリアすると次が解禁）

### エリア構成

| エリア | 階層数 | 環境 | ボス |
|-------|-------|------|------|
| 森 | 20F | -10℃〜-15℃ | 森の悪魔将軍 |
| 村 | 20F | -15℃〜-25℃ | 村の悪魔将軍 |
| 山 | 20F | -25℃〜-40℃ | 山の悪魔将軍 |

### エリア内: 階層選択

```
[1F]
  ↓ 選択肢提示
 ┌┴┐
[2A][2B]  ← どちらかを選ぶ
  ↓
 ...
  ↓
[20F ボス]
```

- 各階層クリア後、次の階層の選択肢が提示される
- 選んだ方に進む（戻れない）
- 選ばなかった方は行けない
- 20Fでボス戦

### 小域探索

各階層内での自由探索。

- グリッドベースのマップ
- ターン制移動
- リソース収集、敵との戦闘

### 進行フロー

```
1. ハブでエリアを選択（解禁済みのもの）
      ↓
2. エリアに入る
      ↓
3. 階層を探索（1F〜20F）
      ↓
4. 次の階層を選択（複数から1つ）
      ↓
5. 繰り返し...
      ↓
6. 20Fボス撃破 → エリアクリア、次のエリア解禁
   or 撤退 → ハブに戻る（進捗リセット）
```

---

## モードシステム

### 人間モード

通常状態。

| 項目 | 値 |
|-----|-----|
| 戦闘力 | 通常 |
| 食料消費 | 1倍 |
| 体温変化 | 環境に依存 |
| 特殊能力 | なし |

### 悪魔モード

戦闘強化状態。

| 項目 | 値 |
|-----|-----|
| 戦闘力 | 強化（2倍程度） |
| 食料消費 | 2倍 |
| 体温変化 | 上昇（+0.5℃/ターン） |
| 特殊能力 | 悪魔スキル使用可能 |

### 起動条件

- 体温35℃以上で起動可能
- 低体温状態では起動できない

### 終了条件

- 任意で解除
- 体温40℃到達で強制解除（過熱リスク）
- 食料切れで強制解除

---

## サバイバルシステム

### 体温

```
体温ゲージ: 25℃ - 42℃

 25℃: 凍死
 30℃: 重度低体温（行動不能）
 33℃: 低体温（行動ペナルティ）
 35℃: 悪魔モード起動可能ライン
 36℃: 平熱
 38℃: 悪魔モード中の通常体温
 40℃: 過熱警告
 42℃: 過熱死
```

### 体温変化要因

| 要因 | 変化 |
|-----|------|
| 寒冷環境 | -0.5〜-2℃/ターン |
| 焚き火 | +1℃/ターン |
| 悪魔モード | +0.5℃/ターン |
| 移動 | +0.2℃/ターン |
| 防寒装備 | 低下を軽減 |

### 食料管理

```
食料ゲージ: 飢餓 ~ 満腹

人間モード: -1%/ターン
悪魔モード: -2%/ターン

0%: 餓死開始（体温も低下）
```

---

## 装備システム

### 二面性

#### 自然環境対策（現実的）

- ジャケット、コート（防寒）
- 焚き火セット（暖を取る）
- 食料、水（生存）

#### 悪魔と戦う装備（ファンタジー）

- 十字架の槍
- 聖水
- 護符

### 装備スロット

- 頭部
- 胴体
- 武器
- アクセサリ

---

## 戦闘システム

### 特徴
- **マップ統合**: 探索画面で直接戦闘実行
- **ターン制**: プレイヤー行動→敵行動
- **モード依存**: 悪魔モードで強化

### 敵の種類

#### 自然の脅威
- 野生動物
- 環境ハザード

#### 悪魔
- 雑魚悪魔
- 中ボス悪魔
- 悪魔将軍（最終ボス）

---

## 悪魔の力（成長システム）

### スキルツリー

```
      [起点]
        │
    ┌───┼───┐
    ↓   ↓   ↓
  [戦闘] [生存] [探索]
    │     │     │
  爪強化  発熱UP  暗視
    │     │     │
  連撃   蓄熱   感知
```

### 強化の入手

- 敵悪魔を倒す
- 特定のアイテムを発見
- エリアをクリア

---

## ターンベース探索システム

### 基本仕様
- **グリッド移動**: 1マス単位での移動
- **アクションコスト**: 全行動に時間コストを設定
- **ターン制**: プレイヤー行動→敵行動→環境変化
- **統合戦闘**: 探索マップ上で直接戦闘実行

### アクションコストシステム

**基本メカニズム:**
- **APの獲得**: 毎ターン開始時に「敏捷性」値分のAPを獲得
- **基本移動コスト**: 通常地形での1マス移動 = 100AP
- **ターン終了条件**: APが0以下になるとターン終了

**行動コスト例:**
```
基本行動:
- 移動（平地）: 100AP
- 移動（対角）: 142AP（√2倍）
- 通常攻撃: 100AP
- 悪魔スキル: 150-300AP
- アイテム使用: 80-120AP
- モード切り替え: 50AP
```

---

## アイテムシステム

### カテゴリ

#### サバイバル用品
- 食料
- 燃料
- 防寒具
- 医療品

#### 戦闘用品
- 武器
- 防具
- 聖具（対悪魔）

#### 素材
- クラフト用素材

### 重量管理

- アイテムには重量がある
- 重量超過で移動ペナルティ
- 取捨選択の判断が必要

---

## 難易度設計

### エリア別難易度

| エリア | 階層 | 環境温度 | 敵の強さ | 必要装備 |
|-------|------|---------|---------|---------|
| 森 | 1-20F | -10〜-15℃ | 弱い | 基本防寒具 |
| 村 | 1-20F | -15〜-25℃ | 中程度 | 強化防寒具 |
| 山 | 1-20F | -25〜-40℃ | 強い | 最高防寒具 |

各エリア内でも階層が深くなるほど難易度上昇。

### バランス方針

- 悪魔モードなしでもギリギリ生存可能
- 悪魔モードで戦闘が有利
- 極寒エリアは悪魔モード or 高装備が必須
